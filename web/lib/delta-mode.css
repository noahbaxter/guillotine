/* DELTA Mode Styles
 * Manages visual transitions when monitoring clipped signal only
 * Colors come from CSS variables in theme.js
 */

:root {
  --delta-transition: 0.4s ease;
}

/* ==========================================================================
   Base Transitions
   ========================================================================== */

.deltable {
  transition: opacity var(--delta-transition), filter var(--delta-transition);
}

.delta-clickable {
  cursor: pointer;
  transition: filter var(--delta-transition);
}

/* ==========================================================================
   Dimming Non-Red Elements
   ========================================================================== */

body.delta-mode .deltable:not(.knob-wrapper):not(.microscope-label) {
  opacity: 0.3;
  filter: grayscale(0.7) brightness(0.6);
}

body.delta-mode #plugin-logo,
body.delta-mode #guillotine-side {
  opacity: 0.12;
}

/* ==========================================================================
   Blood Pool & Delta Toggle
   ========================================================================== */

.blood-pool__puddle {
  transition: background var(--delta-transition);
  background: radial-gradient(ellipse, var(--color-blood-puddle) 0%, transparent 70%);
}

.blood-pool.delta-clickable:hover .blood-pool__puddle {
  background: radial-gradient(ellipse, var(--color-blood-puddle-hover, var(--color-blood-puddle)) 0%, transparent 70%);
}

.blood-pool.delta-clickable.blood-pool--hover-glow .blood-pool__puddle {
  opacity: 1.5;
  filter: brightness(1.35) drop-shadow(0 0 6px var(--color-blood-glow));
  transition: opacity var(--delta-transition), filter var(--delta-transition);
}

/* ==========================================================================
   Bucket Text (La Monte-Ã -Regret) - uses mask technique for exact color
   ========================================================================== */

/* Non-delta mode: gray default, dark red on hover (hints at delta mode) */
#delta-text.delta-clickable:hover .text-mask {
  background-color: var(--color-blood-accent);
}

/* Delta mode: dark red default, bright red on hover */
body.delta-mode #delta-text .text-mask {
  background-color: var(--color-blood-accent);
  opacity: 1;
  filter: none !important;
}

body.delta-mode #delta-text.delta-clickable:hover .text-mask {
  background-color: var(--color-delta-text);
}

/* ==========================================================================
   Knobs - Red Text in Delta Mode
   ========================================================================== */

.knob__label,
.knob__value,
.knob__suffix,
.knob__value__text {
  transition: color var(--delta-transition);
}

body.delta-mode .knob-wrapper:not(.knob-wrapper--disabled) {
  filter: none !important;
}

body.delta-mode .knob-wrapper:not(.knob-wrapper--disabled) .knob__label,
body.delta-mode .knob-wrapper:not(.knob-wrapper--disabled) .knob__value,
body.delta-mode .knob-wrapper:not(.knob-wrapper--disabled) .knob__suffix,
body.delta-mode .knob-wrapper:not(.knob-wrapper--disabled) .knob__value__text {
  color: var(--color-delta-text) !important;
  opacity: 1 !important;
  filter: none !important;
}

/* Mask-based text images in knobs also need background-color */
body.delta-mode .knob-wrapper:not(.knob-wrapper--disabled) .text-mask {
  background-color: var(--color-delta-text) !important;
  opacity: 1 !important;
  filter: none !important;
}

/* ==========================================================================
   Digits - Red in Delta Mode
   ========================================================================== */

.digits__digit,
.digits__dot,
.digits__dash {
  transition: background-color var(--delta-transition);
}

body.delta-mode .digits {
  filter: none !important;
}

body.delta-mode .digits__digit,
body.delta-mode .digits__dot,
body.delta-mode .digits__dash {
  background-color: var(--color-delta-text) !important;
  opacity: 1 !important;
  filter: none !important;
}

/* ==========================================================================
   Logo & Labels - Red in Delta Mode (mask technique for exact color)
   ========================================================================== */

body.delta-mode #plugin-logo {
  background-color: var(--color-delta-text);
  opacity: 1;
  filter: none !important;
}

/* Lockslip and other deltable text-masks turn red */
body.delta-mode #lockslip-text .text-mask {
  background-color: var(--color-delta-text);
  opacity: 1;
  filter: none !important;
}

/* Microscope scale labels use Digits component - delta styling handled by .digits rules above */

/* Microscope dB suffix uses mask */
body.delta-mode .microscope__db-suffix__image {
  background-color: var(--color-delta-text) !important;
}

/* dB labels in microscope sidebar */
body.delta-mode .image-text__image.text-mask {
  background-color: var(--color-delta-text) !important;
  filter: none !important;
}

/* Andy signature */
body.delta-mode #andy-sig {
  background-color: var(--color-delta-text);
  opacity: 1;
  filter: none !important;
}

/* Version text */
#version-tag {
  transition: color var(--delta-transition);
}

body.delta-mode #version-tag {
  color: var(--color-delta-text);
}
